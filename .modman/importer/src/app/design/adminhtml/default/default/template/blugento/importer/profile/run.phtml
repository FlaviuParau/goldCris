<?php
/**
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to
 * newer versions in the future.
 *
 * @category    Blugento
 * @package     Blugento_Importer
 * @author      Mihai Rastasan <mihai.rastasan@blugento.ro>
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/** @var Blugento_Importer_Block_Adminhtml_System_Convert_Profile_Edit_Tab_Run $this */

$imagesToProcess = Mage::getModel('blugento_importer/images')->getImagesToProcess($this->getProfileId());
?>


<script type="text/javascript">
    function runProfile(type) {
        if (type == 'test') {
            var url = '<?php echo $this->getUrl('*/*/test', array('id' => $this->getProfileId())) ?>';
        } else if(type == 'run'){
            var url = '<?php echo $this->getUrl('*/*/run', array('id' => $this->getProfileId())) ?>';
        } else {
            var url = '<?php echo $this->getUrl('*/*/images', array('id' => $this->getProfileId())) ?>';
        }
        window.open(url);
    }
</script>

<ul class="messages">
    <li class="notice-msg">
        <ul>
            <li><?php echo $this->__('Please make sure that your changes were saved before running the profile.') ?></li>
        </ul>
    </li>
</ul>

<p><?php echo $this->getButtonHtml('test') ?></p><br/>
<p><?php echo $this->getButtonHtml('run') ?></p><br/>
<p><?php echo $this->getButtonHtml('images') ?><?php echo $imagesToProcess;?></p>
